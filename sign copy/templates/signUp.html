<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Üyelik Yap - Neet Up</title>
    <link rel="icon" href="/static/NeetUp.PNG" type="image/png">
    <!-- Tailwind CSS for styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Fonts: Inter -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; }
        .custom-placeholder::placeholder { color: #a0aec0; }
        /* Custom style for the select dropdown arrow */
        select {
            background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e");
            background-position: right 0.5rem center;
            background-repeat: no-repeat;
            background-size: 1.5em 1.5em;
            -webkit-appearance: none;
            -moz-appearance: none;
            appearance: none;
        }
    </style>
</head>
<body class="bg-gradient-to-br from-blue-500 to-blue-800 min-h-screen flex items-center justify-center p-4">

    <!-- Signup Form Container -->
    <div class="w-full max-w-md bg-white/10 backdrop-blur-md rounded-2xl shadow-2xl p-8 space-y-4">

        <!-- Logo -->
        <div class="text-center">
            <img 
                src="{{ url_for('static', filename='NeetUp.PNG') }}" 
                alt="NeetUp Logo" 
                class="mx-auto mb-4 h-24 w-24 rounded-full"
            >
        </div>

        <!-- Site Name -->
        <div class="text-center">
            <h1 class="text-5xl font-extrabold text-white" style="text-shadow: 2px 2px 4px rgba(0,0,0,0.3);">
                Neet Up
            </h1>
        </div>

        <!-- Header -->
        <div class="text-center pt-2">
            <h2 class="text-xl font-bold text-white">Üyelik Yap</h2>
            <p class="text-blue-200 mt-1">Başvurunuzu yapın ve başlayın</p>
        </div>

        <!-- Form -->
        <form id="signup-form" class="space-y-4 pt-4">
            <!-- Full Name Field -->
            <div>
                <label for="fullname" class="block text-sm font-medium text-blue-100 mb-2">Ad Soyad</label>
                <input type="text" id="fullname" name="fullName" placeholder="örnek: Ahmet Yılmaz" class="w-full px-4 py-3 bg-gray-900/50 border border-transparent rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent transition custom-placeholder" required>
            </div>

            <!-- Email Field -->
            <div>
                <label for="email" class="block text-sm font-medium text-blue-100 mb-2">E-Posta Adresi</label>
                <input type="email" id="email" name="email" placeholder="örnek: you@example.com" class="w-full px-4 py-3 bg-gray-900/50 border border-transparent rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent transition custom-placeholder" required>
            </div>

            <!-- Username Field -->
            <div>
                <label for="username" class="block text-sm font-medium text-blue-100 mb-2">Kullanıcı Adı</label>
                <input type="text" id="username" name="username" placeholder="örnek: ayşe.yılmaz" class="w-full px-4 py-3 bg-gray-900/50 border border-transparent rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent transition custom-placeholder" required>
            </div>

            <!-- Password Field -->
            <div>
                <label for="password" class="block text-sm font-medium text-blue-100 mb-2">Parola</label>
                <input type="password" id="password" name="password" placeholder="••••••••" class="w-full px-4 py-3 bg-gray-900/50 border border-transparent rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent transition custom-placeholder" required>
            </div>

            <!-- Confirm Password Field -->
            <div>
                <label for="confirm-password" class="block text-sm font-medium text-blue-100 mb-2">Parolayı Onayla</label>
                <input type="password" id="confirm-password" name="confirmPassword" placeholder="••••••••" class="w-full px-4 py-3 bg-gray-900/50 border border-transparent rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent transition custom-placeholder" required>
            </div>

            <!-- Security Question Dropdown -->
            <div>
                <label for="security-question" class="block text-sm font-medium text-blue-100 mb-2">Güvenlik Sorusu</label>
                <select id="security-question" name="securityQuestion" class="w-full px-4 py-3 bg-gray-900/50 border border-transparent rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent transition" required>
                    <option value="" disabled selected>Lütfen bir soru seçin...</option>
                    <option value="pet_name">Evcil Hayvanınızın adı nedir?</option>
                    <option value="mother_maiden_name">Anne adınız nedir?</option>
                    <option value="first_school">İlkokulunuzun adı nedir?</option>
                </select>
            </div>

            <!-- Security Answer Field -->
            <div>
                <label for="security-answer" class="block text-sm font-medium text-blue-100 mb-2">Gizli Cevap</label>
                <input type="text" id="security-answer" name="securityAnswer" placeholder="Gizli cevap" class="w-full px-4 py-3 bg-gray-900/50 border border-transparent rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent transition custom-placeholder" required>
            </div>

            <!-- Sign Up Button -->
            <div>
                <button type="submit" class="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-4 rounded-lg shadow-lg transition-transform transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 mt-4">
                    Üye Ol
                </button>
            </div>
        </form>

        <!-- Login Link -->
        <div class="text-center text-blue-200">
            <p>Üyeliğiniz var mı? <a href="/signin-page" class="font-semibold text-white hover:underline">Giriş Yap</a></p>
        </div>
    </div>

    <!-- JAVASCRIPT TO CONNECT TO THE BACKEND (remains the same) -->
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const form = document.querySelector('#signup-form');
            if (form) {
                form.addEventListener('submit', async (event) => {
                    event.preventDefault();
                    const formData = new FormData(form);
                    const data = Object.fromEntries(formData.entries());
                    try {
                        const response = await fetch('http://localhost:3000/api/auth/signup', {
                            method: 'POST',
                            headers: { 'Content-Type': 'application/json' },
                            body: JSON.stringify(data)
                        });
                        const result = await response.json();
                        if (response.ok) {
                            alert('Signup successful! ' + result.message);
                            window.location.href = '/signin-page'; 
                        } else {
                            alert('Error: ' + result.message);
                        }
                    } catch (error) {
                        console.error('Failed to send request:', error);
                        alert('An error occurred. Please try again.');
                    }
                });
            }
        });
    </script>
</body>
</html>